{
  "run_a": "anki-v17",
  "run_b": "anki-v18",
  "computed_at": "2026-01-08T11:40:14.903629",
  "comparisons": [
    {
      "step": 0,
      "type": "planner",
      "task": null,
      "a": {
        "tokens": 38021,
        "ratio": null,
        "pattern": "."
      },
      "b": {
        "tokens": 36697,
        "ratio": null,
        "pattern": "."
      },
      "token_delta": -0.03482286105047211,
      "ratio_improved": false
    },
    {
      "step": 1,
      "type": "router",
      "task": "001",
      "a": {
        "tokens": 178547,
        "ratio": 0.3333333333333333,
        "pattern": ".EEEA."
      },
      "b": {
        "tokens": 198684,
        "ratio": 0.3333333333333333,
        "pattern": ".EEEA."
      },
      "token_delta": 0.11278262866360118,
      "ratio_improved": false
    },
    {
      "step": 2,
      "type": "builder",
      "task": "001",
      "a": {
        "tokens": 112952,
        "ratio": null,
        "pattern": "A.A.A"
      },
      "b": {
        "tokens": 104423,
        "ratio": 2.0,
        "pattern": "EA.A."
      },
      "token_delta": -0.07550995112968341,
      "ratio_improved": true
    },
    {
      "step": 3,
      "type": "router",
      "task": "002",
      "a": {
        "tokens": 238295,
        "ratio": 0.0,
        "pattern": ".EEEE.."
      },
      "b": {
        "tokens": 193408,
        "ratio": 0.0,
        "pattern": ".EE.."
      },
      "token_delta": -0.18836735978514027,
      "ratio_improved": false
    },
    {
      "step": 4,
      "type": "builder",
      "task": "002",
      "a": {
        "tokens": 231291,
        "ratio": 0.5,
        "pattern": "E..E...A"
      },
      "b": {
        "tokens": 149107,
        "ratio": null,
        "pattern": "AA.A"
      },
      "token_delta": -0.3553272717053409,
      "ratio_improved": false
    },
    {
      "step": 5,
      "type": "router",
      "task": "003",
      "a": {
        "tokens": 155600,
        "ratio": 1.0,
        "pattern": ".EA."
      },
      "b": {
        "tokens": 268195,
        "ratio": 0.0,
        "pattern": "EE.E.."
      },
      "token_delta": 0.7236182519280205,
      "ratio_improved": false
    },
    {
      "step": 6,
      "type": "builder",
      "task": "003",
      "a": {
        "tokens": 555556,
        "ratio": 1.0,
        "pattern": "E.........A"
      },
      "b": {
        "tokens": 248107,
        "ratio": 2.0,
        "pattern": "EA..A"
      },
      "token_delta": -0.5534077572737942,
      "ratio_improved": true
    },
    {
      "step": 7,
      "type": "router",
      "task": "004",
      "a": {
        "tokens": 228503,
        "ratio": 0.0,
        "pattern": ".EE..."
      },
      "b": {
        "tokens": 227570,
        "ratio": 0.3333333333333333,
        "pattern": "EEEA."
      },
      "token_delta": -0.004083097377277322,
      "ratio_improved": true
    },
    {
      "step": 8,
      "type": "builder",
      "task": "004",
      "a": {
        "tokens": 104606,
        "ratio": null,
        "pattern": "...A"
      },
      "b": {
        "tokens": 87935,
        "ratio": null,
        "pattern": "..A"
      },
      "token_delta": -0.159369443435367,
      "ratio_improved": false
    },
    {
      "step": 9,
      "type": "synthesizer",
      "task": null,
      "a": {
        "tokens": 411944,
        "ratio": 0.5,
        "pattern": "AEE....."
      },
      "b": {
        "tokens": 324003,
        "ratio": null,
        "pattern": "....."
      },
      "token_delta": -0.21347804555959063,
      "ratio_improved": false
    }
  ],
  "recommendations": [
    {
      "type": "protocol",
      "agent": "router.md",
      "section": "Core Discipline",
      "change": "Add: \"Act within first 3 tool calls. Do not explore to understand; understand to act.\"",
      "rationale": "explore:action ratio 3:1",
      "priority": "high"
    },
    {
      "type": "protocol",
      "agent": "router.md",
      "section": "Execution",
      "change": "Add: \"After reading workspace/context, Write or Edit immediately.\"",
      "rationale": "first action at position 4",
      "priority": "medium"
    },
    {
      "type": "protocol",
      "agent": "router.md",
      "section": "Constraints",
      "change": "Add: \"Maximum 2 consecutive Reads before Write/Edit.\"",
      "rationale": "explore burst of 3 consecutive traces",
      "priority": "medium"
    }
  ]
}